<body>
  <pre id="readout">Waiting for data...</pre>
  <button id="sendButton">Send JSON to API</button>
  <script>
    // Your existing JavaScript code
    grist.ready();
    grist.onRecord(function(record) {
      document.getElementById('readout').innerHTML = JSON.stringify(record, null, 2);
    });

    // New JavaScript code to send JSON to API
    document.getElementById('sendButton').addEventListener('click', function() {
      const jsonData = JSON.stringify(record); // Assuming 'record' holds the JSON data
      sendDataToAPI(jsonData);
    });

    function sendDataToAPI(jsonData) {
      // Sending JSON data to the specified API using fetch
      fetch('https://script.google.com/macros/s/AKfycbztdvZ9qEbyziOtA7_yOlg9K8voX7yTn3mcTFTCdvWk9hWSmHE6Z8IKrOeDdNkW4Mvf/exec', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: jsonData
      })
      .then(response => {
        // Handle the API response here if needed
        console.log('API Response:', response);
      })
      .catch(error => {
        // Handle any errors that occur during the API call
        console.error('Error sending data:', error);
      });
    }
  </script>
</body>
